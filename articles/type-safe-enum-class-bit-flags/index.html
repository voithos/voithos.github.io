<!DOCTYPE html>
<html lang="en">
  <head><meta charset="utf-8">
<title>
    Type-safe Enum Class Bit Flags | voithos.io
  </title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Improved bit flags for scoped enums.">
<link rel="icon" href="https://voithos.io/favicon.ico">
<link rel="alternate" href="https://voithos.io/articles/feed.xml" title="voithos.io">

<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700&family=Oxygen+Mono&display=swap" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha512-DUC8yqWf7ez3JD1jszxCWSVB0DMP78eOyBpMa5aJki1bIRARykviOuImIczkxlj1KhVSyS16w2FSQetkD4UU2w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/smoothState.js/0.7.2/jquery.smoothState.min.js" integrity="sha512-PA88Ew5anBQLPlovdwOOMj+Ky0x+M6a6bDXYve4q+NDj17AJ37FwHT4Xo758ZQqYKLyvaYko27cQDQ5P/0kOJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>




  
  <link rel="stylesheet" href="/sass/main.min.f78bbde44ef1d89ecaa6d5fd3049688038eed927ca36a8929da2f423b4345bed.css">

  
  <script type="text/javascript" src="/js/index.min.6ec5479881bc3221e976ccfd99c2f5f95b3b8703e46b66424c55cc861cc65db1.js" defer></script>
<script defer src="https://cloud.umami.is/script.js" data-website-id="15ea2043-9487-4989-898e-0abc536e5f33" data-domains="voithos.io"></script>
  </head>
  <body>
    <section id="main" class="smooth-scene"><section class="header-box">
  <section class="site-container">
    <header>
        <h1 class="title">
          <div class="spin cw"></div>
          <div class="spin ccw"></div>
          <a href="/">voithos</a>
        </h1>
        <input type="checkbox" id="nav-checkbox" class="nav-checkbox" role="button">
        <label for="nav-checkbox" class="nav-toggle" onclick></label>
        <nav class="main-nav">
          <ul>
            
            
            <li class="active">
              <a href="/articles/" title="Articles">Articles</a>
            </li>
            
            <li class="">
              <a href="/code/" title="Code">Code</a>
            </li>
            
            <li class="">
              <a href="/writing/" title="Writing">Writing</a>
            </li>
            
            <li class="">
              <a href="/art/" title="Art">Art</a>
            </li>
            
            <li class="">
              <a href="/me/" title="Me">Me</a>
            </li>
            
          </ul>
        </nav>
        <nav class="social-nav">
          <ul>
            <li>
              <a href="https://bsky.app/profile/voithoz.bsky.social"><i class="fa-brands fa-bluesky"></i></a>
            </li>
            <li>
              <a href="https://www.instagram.com/voithoz/"><i class="fa-brands fa-instagram"></i></a>
            </li>
            <li>
              <a href="https://voithos.itch.io/"><i class="fa-brands fa-itch-io"></i></a>
            </li>
            <li>
              <a href="https://github.com/voithos/"><i class="fa-brands fa-github"></i></a>
            </li>
          </ul>
        </nav>
    </header>
  </section>
</section>

      <section class="site-container">
        <section class="parent-content scene-element scene-element--fadein ">
<main class="article article-single">
  <section class="article-body">
    <div class="article-title-box">
      <h1 class="article-title">Type-safe Enum Class Bit Flags</h1>
      
        <span class="article-number">#11</span>
      
    </div>
    
    <section class="article-description">
      Improved bit flags for scoped enums.
    </section>
    
    <div class="article-meta">
  <section class="article-stats">
    December 21, 2024&nbsp;·&nbsp;5 min&nbsp;·&nbsp;997 words
  </section>
  
  <section class="article-tags">
    
      <span class="article-tag pill">c&#43;&#43;</span>
    
  </section>
  
</div>

    <hr>
    <p>I previously wrote an article about <a href="https://voithos.io/articles/enum-class-bitmasks/">defining bitwise operators on scoped
enums</a> in order to use them as bit
flags. While the original approach (using either macros, or
<a href="https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error">SFINAE</a>)
works, there&rsquo;s a different approach that avoids some of the downsides and is
just as (if not more) convenient.</p>
<h2 id="type-safety">
  Type safety&nbsp;<a class="heading-link" href="#type-safety">＃</a>
</h2><p>C++ scoped enumerations (<code>enum class</code>) have several benefits over traditional
C-style enums, with one of the most important being <strong>type safety</strong>. Scoped
enums provide safety not only between enum and integer types, but also between
discrete enum types.</p>
<p>Previously, to use scoped enums as bit flags, we defined bitwise operators
directly on the enum types. While convenient, this approach <em>breaks some of the
type safety</em>. Consider the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#ff79c6">enum</span> <span style="color:#ff79c6">class</span> <span style="color:#50fa7b">RenderPass</span> <span style="color:#ff79c6">:</span> <span style="color:#8be9fd">uint8_t</span> {
</span></span><span style="display:flex;"><span>    None <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>,
</span></span><span style="display:flex;"><span>    Geometry <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> <span style="color:#bd93f9">0</span>,
</span></span><span style="display:flex;"><span>    Lighting <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> <span style="color:#bd93f9">1</span>,
</span></span><span style="display:flex;"><span>    Particles <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> <span style="color:#bd93f9">2</span>,
</span></span><span style="display:flex;"><span>    PostProcess <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span> <span style="color:#ff79c6">&lt;&lt;</span> <span style="color:#bd93f9">3</span>,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd">void</span> Renderer<span style="color:#ff79c6">::</span>ConfigurePass(RenderPass pass) {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Is `pass` a single pass or a set of passes?
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>}
</span></span></code></pre></div><p>When using a <code>RenderPass</code> enum value, it&rsquo;s unclear whether it represents a
single enumeration or a set of them, since we can easily mix the two with
bitwise operators. We could opt to always assume it&rsquo;s a set, but that
complicates code that would otherwise just need to care about a single value at
a time.</p>
<h2 id="using-a-separate-bitflags-type">
  Using a separate <code>BitFlags</code> type&nbsp;<a class="heading-link" href="#using-a-separate-bitflags-type">＃</a>
</h2><p>Instead of changing how the scoped enum itself works, we can define a new
template type that &ldquo;wraps&rdquo; the scoped enum and allows us to treat it as a set of
flags. This has several benefits:</p>
<ul>
<li><strong>Clear distinction</strong> in the type system between a single enum value and a set
of flags.</li>
<li><strong>No setup required</strong> - it &ldquo;just works&rdquo; with any scoped enum out of the box.</li>
<li><strong>Convenience methods</strong> like <code>IsSet()</code> can be added to make common operations
easier.</li>
</ul>
<h3 id="creating-bitflags-instances">
  Creating <code>BitFlags</code> instances&nbsp;<a class="heading-link" href="#creating-bitflags-instances">＃</a>
</h3><p>We can initialize <code>BitFlags</code> with zero, one, or more enum values using
initializer lists.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> flags1;
</span></span><span style="display:flex;"><span>BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> flags2(RenderPass<span style="color:#ff79c6">::</span>Lighting);
</span></span><span style="display:flex;"><span>BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> flags3 <span style="color:#ff79c6">=</span> {RenderPass<span style="color:#ff79c6">::</span>Particles,
</span></span><span style="display:flex;"><span>                               RenderPass<span style="color:#ff79c6">::</span>PostProcess};
</span></span></code></pre></div><p>You can even define sets of enums as <code>constexprs</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> kDeferredPasses <span style="color:#ff79c6">=</span> {RenderPass<span style="color:#ff79c6">::</span>Geometry,
</span></span><span style="display:flex;"><span>                                                  RenderPass<span style="color:#ff79c6">::</span>Lighting};
</span></span></code></pre></div><h3 id="manipulating-bitflags">
  Manipulating <code>BitFlags</code>&nbsp;<a class="heading-link" href="#manipulating-bitflags">＃</a>
</h3><p>We can define convenience methods for common operations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#ff79c6">if</span> (flags1.IsSet(RenderPass<span style="color:#ff79c6">::</span>Geometry)) {
</span></span><span style="display:flex;"><span>    std<span style="color:#ff79c6">::</span>cout <span style="color:#ff79c6">&lt;&lt;</span> <span style="color:#f1fa8c">&#34;Geometry pass is enabled.&#34;</span> <span style="color:#ff79c6">&lt;&lt;</span> std<span style="color:#ff79c6">::</span>endl;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>flags2.Set(RenderPass<span style="color:#ff79c6">::</span>Lighting);
</span></span><span style="display:flex;"><span>flags3.Clear();
</span></span></code></pre></div><p>And of course we can define common bitwise operators:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#6272a4">// Combine with OR.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> flags4 <span style="color:#ff79c6">=</span> flags2 <span style="color:#ff79c6">|</span> RenderPass<span style="color:#ff79c6">::</span>Particles;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// Toggle with XOR.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>flags4 <span style="color:#ff79c6">^=</span> RenderPass<span style="color:#ff79c6">::</span>Lighting;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// Clear a set of flags with AND NOT.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>flags4 <span style="color:#ff79c6">&amp;=</span> <span style="color:#ff79c6">~</span>flags3;
</span></span></code></pre></div><h3 id="accessing-raw-values">
  Accessing raw values&nbsp;<a class="heading-link" href="#accessing-raw-values">＃</a>
</h3><p>If necessary, we can define accessors and constructors of the raw underlying
integer values, in case we need to interact with third-party or lower level APIs
(e.g. serialization). We naturally lose some safety here, so we make sure that
these methods are hard to accidentally use.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#8be9fd">uint8_t</span> raw_flags <span style="color:#ff79c6">=</span> flags4.ToRaw();
</span></span><span style="display:flex;"><span>BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;</span> flags_from_raw <span style="color:#ff79c6">=</span> BitFlags<span style="color:#ff79c6">&lt;</span>RenderPass<span style="color:#ff79c6">&gt;::</span>FromRaw(raw_flags);
</span></span></code></pre></div><h2 id="the-code">
  The code&nbsp;<a class="heading-link" href="#the-code">＃</a>
</h2><p>The full code is below, under the MIT license.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#ff79c6">#include</span> <span style="color:#ff79c6">&lt;bitset&gt;</span><span style="color:#ff79c6">
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6">#include</span> <span style="color:#ff79c6">&lt;ostream&gt;</span><span style="color:#ff79c6">
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6">#include</span> <span style="color:#ff79c6">&lt;type_traits&gt;</span><span style="color:#ff79c6">
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6">#include</span> <span style="color:#ff79c6">&lt;utility&gt;</span><span style="color:#ff79c6">
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6"></span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// Helper class for bitwise flag-like operations on scoped enums.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// This class provides a way to represent combinations of enum values without
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// directly overloading operators on the enum type itself. This approach
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// avoids ambiguity in the type system and allows the enum type to continue
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// representing a single value, while the BitFlags can hold a combination
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// of enum values.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// Example usage:
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// enum class MyEnum { FlagA = 1 &lt;&lt; 0, FlagB = 1 &lt;&lt; 1, FlagC = 1 &lt;&lt; 2 };
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// BitFlags&lt;MyEnum&gt; flags = { MyEnum::FlagA, MyEnum::FlagC };
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// flags.Unset(MyEnum::FlagA);
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// if (flags.IsSet(MyEnum::FlagC)) {
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//   // ...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// }
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">//
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// flags |= MyEnum::FlagB;
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// BitFlags&lt;MyEnum&gt; new_flags = ~flags;
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">template</span> <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">typename</span> T<span style="color:#ff79c6">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">class</span> <span style="color:#50fa7b">BitFlags</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">using</span> UnderlyingT <span style="color:#ff79c6">=</span> std<span style="color:#ff79c6">::</span>underlying_type_t<span style="color:#ff79c6">&lt;</span>T<span style="color:#ff79c6">&gt;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff79c6">public</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">constexpr</span> BitFlags() <span style="color:#ff79c6">:</span> flags_(<span style="color:#ff79c6">static_cast</span><span style="color:#ff79c6">&lt;</span>UnderlyingT<span style="color:#ff79c6">&gt;</span>(<span style="color:#bd93f9">0</span>)) {}
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#ff79c6">explicit</span> <span style="color:#50fa7b">BitFlags</span>(T v) <span style="color:#ff79c6">:</span> flags_(ToUnderlying(v)) {}
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#50fa7b">BitFlags</span>(std<span style="color:#ff79c6">::</span>initializer_list<span style="color:#ff79c6">&lt;</span>T<span style="color:#ff79c6">&gt;</span> vs) <span style="color:#ff79c6">:</span> BitFlags() {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">for</span> (T <span style="color:#8be9fd;font-style:italic">v</span> : vs) {
</span></span><span style="display:flex;"><span>            flags_ <span style="color:#ff79c6">|=</span> ToUnderlying(v);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Checks if a specific flag is set.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">bool</span> <span style="color:#50fa7b">IsSet</span>(T v) <span style="color:#ff79c6">const</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> (flags_ <span style="color:#ff79c6">&amp;</span> ToUnderlying(v)) <span style="color:#ff79c6">==</span> ToUnderlying(v);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Sets a single flag value.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">Set</span>(T v) { flags_ <span style="color:#ff79c6">|=</span> ToUnderlying(v); }
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Unsets a single flag value.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">Unset</span>(T v) { flags_ <span style="color:#ff79c6">&amp;=</span> <span style="color:#ff79c6">~</span>ToUnderlying(v); }
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Clears all flag values.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">void</span> <span style="color:#50fa7b">Clear</span>() { flags_ <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">static_cast</span><span style="color:#ff79c6">&lt;</span>UnderlyingT<span style="color:#ff79c6">&gt;</span>(<span style="color:#bd93f9">0</span>); }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#ff79c6">operator</span> <span style="color:#50fa7b">bool</span>() <span style="color:#ff79c6">const</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> flags_ <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">static_cast</span><span style="color:#ff79c6">&lt;</span>UnderlyingT<span style="color:#ff79c6">&gt;</span>(<span style="color:#bd93f9">0</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">|</span>(BitFlags lhs, T rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">|</span> ToUnderlying(rhs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">|</span>(BitFlags lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">|</span> rhs.flags_);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">&amp;</span>(BitFlags lhs, T rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">&amp;</span> ToUnderlying(rhs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">&amp;</span>(BitFlags lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">&amp;</span> rhs.flags_);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">^</span>(BitFlags lhs, T rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">^</span> ToUnderlying(rhs));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">^</span>(BitFlags lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(lhs.flags_ <span style="color:#ff79c6">^</span> rhs.flags_);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">|=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, T rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">|=</span> ToUnderlying(rhs);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">|=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">|=</span> rhs.flags_;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">&amp;=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, T rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">&amp;=</span> ToUnderlying(rhs);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">&amp;=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">&amp;=</span> rhs.flags_;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">^=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, T rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">^=</span> ToUnderlying(rhs);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">^=</span>(BitFlags<span style="color:#ff79c6">&amp;</span> lhs, BitFlags rhs) {
</span></span><span style="display:flex;"><span>        lhs.flags_ <span style="color:#ff79c6">^=</span> rhs.flags_;
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">~</span>(<span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> bf) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> <span style="color:#50fa7b">BitFlags</span>(<span style="color:#ff79c6">~</span>bf.flags_);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">bool</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">==</span>(<span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> lhs, <span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs.flags_ <span style="color:#ff79c6">==</span> rhs.flags_;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">friend</span> <span style="color:#ff79c6">constexpr</span> <span style="color:#8be9fd">bool</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">!=</span>(<span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> lhs, <span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> rhs) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> lhs.flags_ <span style="color:#ff79c6">!=</span> rhs.flags_;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Stream output operator for debugging.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">friend</span> std<span style="color:#ff79c6">::</span>ostream<span style="color:#ff79c6">&amp;</span> <span style="color:#ff79c6">operator</span><span style="color:#ff79c6">&lt;&lt;</span>(std<span style="color:#ff79c6">::</span>ostream<span style="color:#ff79c6">&amp;</span> os, <span style="color:#ff79c6">const</span> BitFlags<span style="color:#ff79c6">&amp;</span> bf) {
</span></span><span style="display:flex;"><span>        <span style="color:#6272a4">// Write out a bitset representation.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>        os <span style="color:#ff79c6">&lt;&lt;</span> std<span style="color:#ff79c6">::</span>bitset<span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">sizeof</span>(UnderlyingT) <span style="color:#ff79c6">*</span> <span style="color:#bd93f9">8</span><span style="color:#ff79c6">&gt;</span>(bf.flags_);
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> os;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Construct BitFlags from raw values.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">static</span> <span style="color:#ff79c6">constexpr</span> BitFlags <span style="color:#50fa7b">FromRaw</span>(UnderlyingT flags) {
</span></span><span style="display:flex;"><span>        <span style="color:#ff79c6">return</span> BitFlags(flags);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// Retrieve the raw underlying flags.
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#ff79c6">constexpr</span> UnderlyingT <span style="color:#50fa7b">ToRaw</span>() <span style="color:#ff79c6">const</span> { <span style="color:#ff79c6">return</span> flags_; }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#ff79c6">private</span><span style="color:#ff79c6">:</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">constexpr</span> <span style="color:#ff79c6">explicit</span> BitFlags(UnderlyingT flags) <span style="color:#ff79c6">:</span> flags_(flags) {}
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">static</span> <span style="color:#ff79c6">constexpr</span> UnderlyingT <span style="color:#50fa7b">ToUnderlying</span>(T v) { <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">static_cast</span><span style="color:#ff79c6">&lt;</span>UnderlyingT<span style="color:#ff79c6">&gt;</span>(v); }
</span></span><span style="display:flex;"><span>    UnderlyingT flags_;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div>
  </section>
</main>
<footer>
  <i class="heart fa-solid fa-heart"></i>
</footer>

        </section>
      </section>
    </section>
  </body>
</html>
